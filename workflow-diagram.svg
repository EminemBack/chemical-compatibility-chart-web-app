<svg width="1200" height="1400" xmlns="http://www.w3.org/2000/svg">
  <!-- Define styles -->
  <defs>
    <style>
      .box-pending-review { fill: #FFF3E0; stroke: #FFA500; stroke-width: 3; }
      .box-pending { fill: #E3F2FD; stroke: #2196F3; stroke-width: 3; }
      .box-approved { fill: #E8F5E9; stroke: #4CAF50; stroke-width: 3; }
      .box-rejected { fill: #FFEBEE; stroke: #F44336; stroke-width: 3; }
      .box-rework { fill: #FFF3E0; stroke: #FF9800; stroke-width: 3; }
      .box-action { fill: #F5F5F5; stroke: #757575; stroke-width: 2; }
      .box-decision { fill: #FFF9C4; stroke: #FBC02D; stroke-width: 2; }
      .text-title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #333; }
      .text-normal { font-family: Arial, sans-serif; font-size: 14px; fill: #555; }
      .text-small { font-family: Arial, sans-serif; font-size: 12px; fill: #666; }
      .arrow { fill: none; stroke: #333; stroke-width: 2; marker-end: url(#arrowhead); }
      .arrow-green { fill: none; stroke: #4CAF50; stroke-width: 2; marker-end: url(#arrowhead-green); }
      .arrow-red { fill: none; stroke: #F44336; stroke-width: 2; marker-end: url(#arrowhead-red); }
      .arrow-orange { fill: none; stroke: #FF9800; stroke-width: 2; marker-end: url(#arrowhead-orange); }
    </style>

    <!-- Arrow markers -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4CAF50" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#F44336" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#FF9800" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" class="text-title" font-size="24">Container Safety Assessment Workflow</text>

  <!-- 1. User Submits -->
  <rect x="450" y="60" width="300" height="80" rx="10" class="box-action"/>
  <text x="600" y="90" text-anchor="middle" class="text-title">ğŸ‘¤ User Submits Container</text>
  <text x="600" y="110" text-anchor="middle" class="text-small">Fill form + 3 photos</text>
  <text x="600" y="125" text-anchor="middle" class="text-small">+ hazards + distances</text>

  <!-- Arrow down -->
  <path d="M 600 140 L 600 180" class="arrow"/>

  <!-- 2. Status: pending_review -->
  <rect x="450" y="180" width="300" height="70" rx="10" class="box-pending-review"/>
  <text x="600" y="210" text-anchor="middle" class="text-title">Status: pending_review</text>
  <text x="600" y="230" text-anchor="middle" class="text-small">ğŸ”¶ Appears in Admin Review tab</text>

  <!-- Arrow down split -->
  <path d="M 600 250 L 600 280" class="arrow"/>
  <path d="M 600 280 L 300 280 L 300 320" class="arrow"/>
  <path d="M 600 280 L 900 280 L 900 320" class="arrow"/>

  <!-- 3a. Admin Review Path -->
  <rect x="150" y="320" width="300" height="70" rx="10" class="box-decision"/>
  <text x="300" y="345" text-anchor="middle" class="text-title">ğŸ‘¨â€ğŸ’¼ Admin Reviews</text>
  <text x="300" y="365" text-anchor="middle" class="text-small">Checks completeness,</text>
  <text x="300" y="380" text-anchor="middle" class="text-small">safety, photos quality</text>

  <!-- 3b. HOD Bypass Path -->
  <rect x="750" y="320" width="300" height="70" rx="10" class="box-decision"/>
  <text x="900" y="345" text-anchor="middle" class="text-title">ğŸ‘” HOD Bypass</text>
  <text x="900" y="365" text-anchor="middle" class="text-small">HOD can approve directly</text>
  <text x="900" y="380" text-anchor="middle" class="text-small">without waiting for admin</text>

  <!-- Admin approves path -->
  <path d="M 300 390 L 300 430" class="arrow-green"/>

  <!-- 4. Admin Approved - Status: pending -->
  <rect x="150" y="430" width="300" height="70" rx="10" class="box-pending"/>
  <text x="300" y="460" text-anchor="middle" class="text-title">Status: pending</text>
  <text x="300" y="480" text-anchor="middle" class="text-small">âœ… Admin reviewed + forwarded to HOD</text>

  <!-- Arrow to HOD Decision -->
  <path d="M 300 500 L 300 540 L 600 540 L 600 580" class="arrow"/>

  <!-- 5. HOD Final Decision -->
  <rect x="450" y="580" width="300" height="70" rx="10" class="box-decision"/>
  <text x="600" y="605" text-anchor="middle" class="text-title">ğŸ‘” HOD Final Decision</text>
  <text x="600" y="625" text-anchor="middle" class="text-small">Approve / Reject / Rework</text>

  <!-- HOD bypass direct path -->
  <path d="M 900 390 L 900 540 L 750 540 L 600 580" class="arrow"/>

  <!-- Decision arrows -->
  <path d="M 600 650 L 600 710" class="arrow-green"/>
  <path d="M 650 615 L 850 615 L 850 710" class="arrow-red"/>
  <path d="M 550 615 L 350 615 L 350 710" class="arrow-orange"/>

  <!-- 6a. Approved -->
  <rect x="450" y="710" width="300" height="90" rx="10" class="box-approved"/>
  <text x="600" y="735" text-anchor="middle" class="text-title">âœ… APPROVED</text>
  <text x="600" y="755" text-anchor="middle" class="text-small">Status: approved</text>
  <text x="600" y="775" text-anchor="middle" class="text-small">ğŸ‰ QR Code Generated</text>
  <text x="600" y="790" text-anchor="middle" class="text-small">ğŸ“§ User notified</text>

  <!-- 6b. Rejected -->
  <rect x="800" y="710" width="200" height="90" rx="10" class="box-rejected"/>
  <text x="900" y="735" text-anchor="middle" class="text-title">âŒ REJECTED</text>
  <text x="900" y="755" text-anchor="middle" class="text-small">Status: rejected</text>
  <text x="900" y="775" text-anchor="middle" class="text-small">ğŸ“§ User notified</text>
  <text x="900" y="790" text-anchor="middle" class="text-small">with reason</text>

  <!-- 6c. Rework -->
  <rect x="200" y="710" width="200" height="90" rx="10" class="box-rework"/>
  <text x="300" y="735" text-anchor="middle" class="text-title">ğŸ”„ REWORK</text>
  <text x="300" y="755" text-anchor="middle" class="text-small">Status: rework_requested</text>
  <text x="300" y="775" text-anchor="middle" class="text-small">ğŸ“§ User notified</text>
  <text x="300" y="790" text-anchor="middle" class="text-small">with changes needed</text>

  <!-- Rework path -->
  <path d="M 300 800 L 300 860" class="arrow-orange"/>

  <!-- 7. User Edits -->
  <rect x="200" y="860" width="200" height="90" rx="10" class="box-action"/>
  <text x="300" y="890" text-anchor="middle" class="text-title">âœï¸ User Edits</text>
  <text x="300" y="910" text-anchor="middle" class="text-small">Modify fields</text>
  <text x="300" y="925" text-anchor="middle" class="text-small">(Container ID locked)</text>
  <text x="300" y="940" text-anchor="middle" class="text-small">Upload new photos</text>

  <!-- Resubmit path back to start -->
  <path d="M 300 950 L 300 1000 L 100 1000 L 100 100 L 450 100" class="arrow-orange"/>
  <text x="150" y="990" text-anchor="middle" class="text-small" fill="#FF9800">Resubmit</text>

  <!-- Legend -->
  <g transform="translate(50, 1100)">
    <text x="0" y="0" class="text-title">Legend:</text>

    <rect x="0" y="10" width="80" height="30" rx="5" class="box-pending-review"/>
    <text x="90" y="30" class="text-small">pending_review (Awaiting Admin/HOD)</text>

    <rect x="0" y="50" width="80" height="30" rx="5" class="box-pending"/>
    <text x="90" y="70" class="text-small">pending (Awaiting HOD)</text>

    <rect x="0" y="90" width="80" height="30" rx="5" class="box-approved"/>
    <text x="90" y="110" class="text-small">approved (Active)</text>

    <rect x="400" y="10" width="80" height="30" rx="5" class="box-rejected"/>
    <text x="490" y="30" class="text-small">rejected (Inactive)</text>

    <rect x="400" y="50" width="80" height="30" rx="5" class="box-rework"/>
    <text x="490" y="70" class="text-small">rework_requested (Needs Changes)</text>

    <rect x="400" y="90" width="80" height="30" rx="5" class="box-decision"/>
    <text x="490" y="110" class="text-small">Decision Point</text>
  </g>

  <!-- Roles box -->
  <g transform="translate(850, 1100)">
    <rect x="0" y="0" width="300" height="130" rx="5" fill="#F5F5F5" stroke="#333" stroke-width="2"/>
    <text x="150" y="25" text-anchor="middle" class="text-title">Roles:</text>
    <text x="10" y="50" class="text-normal">ğŸ‘¤ User: Submit & Edit reworked</text>
    <text x="10" y="75" class="text-normal">ğŸ‘¨â€ğŸ’¼ Admin: Review submissions</text>
    <text x="10" y="100" class="text-normal">ğŸ‘” HOD: Final approval authority</text>
    <text x="10" y="120" class="text-small">   (can bypass admin review)</text>
  </g>

  <!-- Key Features -->
  <g transform="translate(50, 1260)">
    <text x="0" y="0" class="text-title">Key Features:</text>
    <text x="0" y="25" class="text-small">â€¢ HOD can bypass admin review and approve directly from pending_review status</text>
    <text x="0" y="45" class="text-small">â€¢ Rework allows iterative improvements with locked Container ID</text>
    <text x="0" y="65" class="text-small">â€¢ All status changes trigger email notifications to relevant parties</text>
    <text x="0" y="85" class="text-small">â€¢ Admin review comments visible to HOD for informed decision-making</text>
    <text x="0" y="105" class="text-small">â€¢ QR code generated only after final HOD approval</text>
  </g>
</svg>